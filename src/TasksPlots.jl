module TasksPlots
#############################################################################

import myLibs: ComputeTasks 

import Helpers 

#import Helpers.myPlots

using Helpers.myPlots: PlotTask 

using Helpers.Calculations: Calculation  

using Constants: ENERGIES

import ...GreensFcts  

import LayeredLattice

#===========================================================================#
#
function Observables(;constrained_params, observables, kwargs...)::PlotTask
#
#---------------------------------------------------------------------------#

	C = Calculation(GreensFcts; observables=observables, kwargs...)

	task = ComputeTasks.init_task(C; constrained_params=[1=>constrained_params])
														
	init_sliders = [Helpers.myPlots.init_obs(observables),
									Helpers.myPlots.init_enlim(ENERGIES)
									]
		
	return PlotTask(task, 
									init_sliders, 
									Helpers.myPlots.plot_obs(task.get_data))

end




#===========================================================================#
#
function LocalObservables(;observables, kwargs...)::PlotTask
#
#---------------------------------------------------------------------------#

	pt0 = Observables(;observables=observables, kwargs...)


	return PlotTask((getproperty(pt0, k) for k in [:name, :get_plotparams, :get_paramcombs, :files_exist, :get_data])...,
									Helpers.myPlots.init_localobs(observables),
									Helpers.myPlots.plot_localobs(pt0.get_data, LayeredLattice)...)


end








































































































































































































































































































































































































############################################################################# 
end
