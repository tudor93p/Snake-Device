import Device 
import Helpers 
import Helpers.ObservableNames
#using Helpers.Calculations: Calculation
import myLibs: ComputeTasks

#spectrum = Calculation(Device.Hamilt_Diagonaliz, input_dict).Compute(P) 
#
#@show spectrum["Energy"][10]
#@show size(spectrum["Energy"])



#tasks = [
#				 Tasks.Device_Observables,
#				 ]
#
#
#
#
#Tasks.Generic.plot(tasks)



P = Dict(:length=>10,:width=>7, :Barrier_height=>1.0,:SCpx_magnitude=>0.4,:SCDW_position=>0.3,:delta=>0.002,:AtomToLayer=>"forced")


id2 = merge(input_dict, Dict(
									 :observables => Helpers.ObservableNames.construct_ObsNames("DOS","LocalDOS"),
	
									 :constrained_params => [ 
													(l,p) -> (div(p[:length],2), p[:SCpx_magnitude], ),

													(:width, :SCpy_magnitude, ),

													],

									)
					 )



#@show id2[:allparams]


merge!(merge, id2, input_GF)

#@show id2[:allparams]


tasks = [f(;id2...) for f in [Device.TasksPlots.Observables,
															Device.TasksPlots.LocalObservables]
				 ]

task = tasks[1] 

P = task.get_paramcombs()[1][1]

@show task.files_exist(P)

foreach(println,task.get_paramcombs())

@show task.get_plotparams(P)

#task.get_data(P)

@show task.pyplot_script


println()



ComputeTasks.missing_data(task, show_missing=true)#false) 


ComputeTasks.existing_data(task, show_existing=true)


ComputeTasks.get_data_one(task, mute=false)



ComputeTasks.get_plot_one(task)


#ComputeTasks.get_data_all(task, check_data=true, mute=false)


Helpers.myPlots.plot(tasks)#; insets=insets)
































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































nothing
